<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
		<!-- Google Chrome Frame也可以让IE用上Chrome的引擎: -->
		<meta name="renderer" content="webkit">
		<!--国产浏览器高速模式-->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Mr. Jiang" />
		<title>职位发布变更</title>

		<!-- 导航元素依赖 开始 -->	
		<link rel="stylesheet" href="../../css/font.css">
		<link rel="stylesheet" href="../../css/xadmin.css">
		<script src="../../lib/layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="../../js/xadmin.js"></script>
		<!-- 导航元素依赖 结束 -->
	</head>
	<body>
		<!-- 头部导航 开始 -->
		<div class="x-nav">
		  <span class="layui-breadcrumb">
		    <a href="">招聘管理</a>
		    <a href="">职位发布管理</a>
		    <a>
		      <cite>职位发布变更</cite></a>
		  </span>
		  <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" onclick="location.reload()" title="刷新">
		    <i class="layui-icon layui-icon-refresh" style="line-height:30px"></i></a>
		</div>
		<div style="margin-top: 20px; margin-bottom: 20px;">
			<span class="layui-breadcrumb">
			  <a href="">当前可变更是职位发布总数：</a>
			  <a href="">2</a>
			  <a>
			    <cite>个</cite></a>
			</span>
		</div>
		<!-- 头部导航 结束 -->
		
		<!--<table class="layui-table" lay-skin="line">
		    <colgroup>
		      <col width="150">
		      <col width="200">
		      <col>
		    </colgroup>
		    <thead>
		      <tr>
		        <th>职位名称</th>
		        <th>公司名称</th>
		        <th>招聘人数</th>
				<th>发布时间</th>
				<th>截止时间</th>
				<th>操作</th>
		      </tr> 
		    </thead>
		    <tbody>
				<tr>
					<td>区域经理</td>
					<td>软件公司</td>
					<td>3</td>
					<td>2012-08-01 12:00:00</td>
					<td>2012-12-30 12:00:00</td>
					<td>
						<button type="button" onclick="xadmin.open('职位更改','JobPostingChange-Update.html',1000,650)" class="layui-btn layui-btn-sm layui-btn-normal">修改</button>
						<button type="button" class="layui-btn layui-btn-sm layui-btn-danger">删除</button>
					</td>
				</tr>
				
				<tr>
					<td>总经理</td>
					<td>生物科技有限公司</td>
					<td>2</td>
					<td>2012-08-02 12:00:00</td>
					<td>2012-11-15 12:00:00</td>
					<td>
						<button type="button" onclick="xadmin.open('职位更改','JobPostingChange-Update.html',1000,650)" class="layui-btn layui-btn-sm layui-btn-normal">修改</button>
						<button type="button" class="layui-btn layui-btn-sm layui-btn-danger">删除</button>
					</td>
				</tr>	
		    </tbody>
			
			<tfoot>
				<tr align="center">
					<td colspan="6">
						<div id="page"></div>
						 
						<script src="/lib/layui/layui.js"></script>
						<script>
						layui.use('laypage', function(){
						  let laypage = layui.laypage;
						  
						  //执行一个laypage实例
						  laypage.render({
						    elem: 'page' //注意，这里的 test1 是 ID，不用加 # 号
						    ,count: 50 //数据总数，从服务端得到
						  });
						});
						</script>
					</td>
				</tr>
			</tfoot>
		</table>		-->
		<!-- 数据表格 -->
		<table class="layui-hide" id="jobTable" lay-filter="jobTable"></table>

		<!-- job -->
		<div style="display: none;" id="jobToolBar">
			<button type="button" class="layui-btn layui-btn-sm" lay-event="add">增加</button>
		</div>

		<div  id="jobBar" style="display: none;">
			<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
			<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
		</div>

		<script>
			let tableIns;
			layui.use([ 'jquery', 'layer', 'form', 'table'], function() {
				let $ = layui.jquery;
				let layer = layui.layer;
				let form = layui.form;
				let table = layui.table;
				// let dtree = layui.dtree;
				//渲染数据表格
				tableIns = table.render({
					elem: '#jobTable'   //渲染的目标对象
					, url: 'http://127.0.0.1:8080/ssm/engage-major-release/paging' //数据接口
					, title: '招聘表'//数据导出来的标题
					, toolbar: "#jobToolBar"   //表格的工具条
					, height: 'full-230'
					, cellMinWidth: 300 //设置列的最小默认宽度
					, page: 1  //是否启用分页, limits: [10, 20, 30]
					, limits: [10, 20, 30]
					, limit: 1 //默认采用2
					, cols: [[   //列表数据
						{field: 'mreId', title: 'ID', align: 'center', width: '50'}
						, {field: 'secondKindName', title: '公司名称', align: 'center'}
						, {field: 'humanAmount', title: '招聘人数', align: 'center'}
						, {field: 'registerTime', title: '发布时间', align: 'center'}
						, {field: 'deadline', title: '过期时间', align: 'center'}
						, {fixed: 'right', title: '操作', toolbar: '#jobBar', align: 'center', width: '260'}
					]]
				})


				//监听行工具事件
				table.on('tool(jobTable)', function(obj){
					let data = obj.data; //获得当前行数据
					let layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
					if(layEvent === 'del'){ //删除
						layer.confirm('真的删除这条招聘信息吗', function(index){
							let mreId = data.mreId;
							//向服务端发送删除指令
							$.post("user/del/" + mreId, {_method: "delete"},function(res){
								layer.msg(res);
								//刷新数据 表格
								tableIns.reload();
							})
						});
					} else if(layEvent === 'edit'){ //编辑
						// 打开编辑页面~

					}
				});

			});

		</script>


	</body>
</html>
